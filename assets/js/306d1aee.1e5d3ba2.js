"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[3796],{3905:(e,t,a)=>{a.d(t,{Zo:()=>l,kt:()=>u});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},l=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,l=m(e,["components","mdxType","originalType","parentName"]),d=p(a),u=r,h=d["".concat(s,".").concat(u)]||d[u]||c[u]||i;return a?n.createElement(h,o(o({ref:t},l),{},{components:a})):n.createElement(h,o({ref:t},l))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=d;var m={};for(var s in t)hasOwnProperty.call(t,s)&&(m[s]=t[s]);m.originalType=e,m.mdxType="string"==typeof e?e:r,o[1]=m;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},57412:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>m,toc:()=>p});var n=a(83117),r=(a(67294),a(3905));const i={sidebar_position:3,title:"Save Command"},o=void 0,m={unversionedId:"mutation/save-command/index",id:"mutation/save-command/index",title:"Save Command",description:"In recent months, the save instruction has undergone a major restructuring, so there hasn't been time to update all the documentation in this directory.",source:"@site/docs/mutation/save-command/index.md",sourceDirName:"mutation/save-command",slug:"/mutation/save-command/",permalink:"/jimmer-doc/docs/mutation/save-command/",draft:!1,editUrl:"https://github.com/babyfish-ct/jimmer-doc/edit/main/docs/mutation/save-command/index.md",tags:[],version:"current",lastUpdatedAt:1728478026,formattedLastUpdatedAt:"Oct 9, 2024",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Save Command"},sidebar:"tutorialSidebar",previous:{title:"Delete Statement",permalink:"/jimmer-doc/docs/mutation/delete-statement"},next:{title:"Basic Usage",permalink:"/jimmer-doc/docs/mutation/save-command/usage"}},s={},p=[],l={toc:p};function c(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},l,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"In recent months, the save instruction has undergone a major restructuring, so there hasn't been time to update all the documentation in this directory."),(0,r.kt)("p",{parentName:"admonition"},"Apart from new features, the new version of the save instruction has made minimal changes to existing functionality, and it remains largely consistent with the description in this directory. However, the new version of the save instruction ",(0,r.kt)("strong",{parentName:"p"},"generates SQL with much higher performance than described here"),"."),(0,r.kt)("p",{parentName:"admonition"},"The good news is that this historically significant restructuring of Jimmer has finally been completed and stabilized, so all the content in this directory will be updated soon.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"One statement to save complex data of arbitrary shape, find DIFF to change database, like React/Vue")),(0,r.kt)("p",null,"Save commands are a very powerful capability of Jimmer that can greatly simplify the development difficulty of persisting complex data structures."),(0,r.kt)("p",null,"If ",(0,r.kt)("a",{parentName:"p",href:"../../query/object-fetcher"},"object fetchers")," enable output data to be in any shape, then save commands allow input data to also be in any shape."),(0,r.kt)("p",null,"For readers familiar with web frontend technologies, this can be analogized to ",(0,r.kt)("inlineCode",{parentName:"p"},"Virtual DOM diff")," in ",(0,r.kt)("a",{parentName:"p",href:"https://react.dev/"},"React")," or ",(0,r.kt)("a",{parentName:"p",href:"https://vuejs.org/"},"Vue"),"."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Save command require developers to ",(0,r.kt)("strong",{parentName:"p"},"completely change their thinking pattern")),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Fundamental difference in thinking"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The traditional thinking pattern:"),(0,r.kt)("p",{parentName:"li"},"Manually compare the data structure to be saved with existing data in the database, and execute ",(0,r.kt)("inlineCode",{parentName:"p"},"INSERT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"UPDATE")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE")," on the changed parts")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The thinking pattern for save command:"),(0,r.kt)("p",{parentName:"li"},"Accept the data structure passed from client as a whole and just save it. Jimmer will handle everything ",(0,r.kt)("em",{parentName:"p"},"(automatically compare the data structure to be saved with existing data in the database, and execute ",(0,r.kt)("inlineCode",{parentName:"em"},"INSERT"),", ",(0,r.kt)("inlineCode",{parentName:"em"},"UPDATE")," or ",(0,r.kt)("inlineCode",{parentName:"em"},"DELETE")," on the changed parts)"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Old habits should be replaced by better methods"),(0,r.kt)("p",{parentName:"li"},"In the traditional development mode, developers like to do one thing: query an object first, then modify some of its properties, and finally save the modified object."),(0,r.kt)("p",{parentName:"li"},"Although Jimmer also allows developers to do this, it is recommended to use a more performant approach, please refer to ",(0,r.kt)("a",{parentName:"p",href:"./incomplete"},"Incomplete Object"),".")))),(0,r.kt)("p",null,"Calling a save command only takes one line of code, but hides countless details internally that documentation cannot exhaustively enumerate. Therefore, save commands have a dedicated sample project:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Java: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/babyfish-ct/jimmer-examples/tree/main/java/save-command"},"jimmer-examples/java/save-command")," ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Kotlin: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/babyfish-ct/jimmer-examples/tree/main/kotlin/save-command-kt"},"jimmer-examples/kotlin/save-command-kt")))),(0,r.kt)("p",null,"Simply open either one in an IDE, and run the unit tests."))}c.isMDXComponent=!0}}]);